import{d as D,r as g,o as w,c as a,a as e,b as I,w as S,e as x,f as y,v as F,g as N,F as T,h as V,t as r,n as E,k as p,i as l,_ as z}from"./index-DyGaL9C0.js";import{b as c}from"./bookingService-BZva0LsA.js";const M={class:"bookings fade-in"},P={class:"flex justify-between items-center",style:{"margin-bottom":"2rem"}},A={class:"glass-card",style:{"margin-bottom":"2rem"}},L={class:"grid grid-cols-2 gap-2"},R={class:"form-group"},U={class:"form-group"},$={key:0,class:"glass-card"},W={key:1,class:"glass-card"},j={key:2,class:"glass-card"},O={class:"glass-table"},q={style:{"font-size":"0.85rem",color:"rgba(255, 255, 255, 0.6)"}},G={class:"flex gap-1"},H=["onClick"],J=["onClick"],K=["onClick"],Q=D({__name:"BookingsView",setup(X){const d=g([]),m=g(!0),i=g({searchTerm:"",status:void 0}),k=o=>({0:"Waiting",1:"Confirmed",2:"Cancelled",3:"Refund",4:"Done"})[o]||"Unknown",b=o=>({0:"badge-warning",1:"badge-success",2:"badge-danger",3:"badge-info",4:"badge-primary"})[o]||"",h=o=>new Intl.NumberFormat("id-ID").format(o),f=o=>new Date(o).toLocaleDateString("id-ID",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),u=async()=>{try{m.value=!0;const o=await c.getAllBookings(i.value.searchTerm||void 0,i.value.status);d.value=o.data}catch(o){console.error("Error loading bookings:",o),alert("Failed to load bookings")}finally{m.value=!1}},C=async o=>{var t,n;if(confirm("Confirm payment for this booking?"))try{await c.confirmPayment(o),alert("Payment confirmed successfully"),u()}catch(s){console.error("Error confirming payment:",s),alert(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to confirm payment")}},_=async o=>{var t,n;if(confirm("Are you sure you want to cancel this booking?"))try{await c.cancelBooking(o),alert("Booking cancelled successfully"),u()}catch(s){console.error("Error cancelling booking:",s),alert(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to cancel booking")}},B=async o=>{var t,n;if(confirm("Mark this booking as completed?"))try{await c.completeBooking(o),alert("Booking completed successfully"),u()}catch(s){console.error("Error completing booking:",s),alert(((n=(t=s.response)==null?void 0:t.data)==null?void 0:n.message)||"Failed to complete booking")}};return w(()=>{u()}),(o,t)=>{const n=x("router-link");return l(),a("div",M,[e("div",P,[t[3]||(t[3]=e("h1",null,"Bookings Management",-1)),I(n,{to:"/bookings/create"},{default:S(()=>[...t[2]||(t[2]=[e("button",{class:"glass-button primary"},"➕ Create Booking",-1)])]),_:1})]),e("div",A,[t[7]||(t[7]=e("h3",null,"Filters",-1)),e("div",L,[e("div",R,[t[4]||(t[4]=e("label",{class:"form-label"},"Search",-1)),y(e("input",{"onUpdate:modelValue":t[0]||(t[0]=s=>i.value.searchTerm=s),type:"text",class:"glass-input",placeholder:"Search by customer name...",onInput:u},null,544),[[F,i.value.searchTerm]])]),e("div",U,[t[6]||(t[6]=e("label",{class:"form-label"},"Status",-1)),y(e("select",{"onUpdate:modelValue":t[1]||(t[1]=s=>i.value.status=s),class:"glass-input",onChange:u},[...t[5]||(t[5]=[e("option",{value:void 0},"All Status",-1),e("option",{value:0},"Waiting",-1),e("option",{value:1},"Confirmed",-1),e("option",{value:2},"Cancelled",-1),e("option",{value:3},"Refund",-1),e("option",{value:4},"Done",-1)])],544),[[N,i.value.status]])])])]),m.value?(l(),a("div",$,[...t[8]||(t[8]=[e("p",null,"Loading bookings...",-1)])])):d.value.length===0?(l(),a("div",W,[...t[9]||(t[9]=[e("p",null,"No bookings found.",-1)])])):(l(),a("div",j,[e("table",O,[t[10]||(t[10]=e("thead",null,[e("tr",null,[e("th",null,"Booking ID"),e("th",null,"Customer"),e("th",null,"Check-in"),e("th",null,"Check-out"),e("th",null,"Total Price"),e("th",null,"Status"),e("th",null,"Actions")])],-1)),e("tbody",null,[(l(!0),a(T,null,V(d.value,s=>(l(),a("tr",{key:s.bookingID},[e("td",null,r(s.bookingID),1),e("td",null,[e("div",null,r(s.customerName),1),e("div",q,r(s.customerEmail),1)]),e("td",null,r(f(s.checkInDate)),1),e("td",null,r(f(s.checkOutDate)),1),e("td",null,"Rp "+r(h(s.totalPrice)),1),e("td",null,[e("span",{class:E(["badge",b(s.status)])},r(k(s.status)),3)]),e("td",null,[e("div",G,[s.status===0?(l(),a("button",{key:0,class:"glass-button success",onClick:v=>C(s.bookingID),style:{padding:"0.5rem 1rem","font-size":"0.9rem"}}," ✓ Confirm ",8,H)):p("",!0),s.status===0||s.status===1?(l(),a("button",{key:1,class:"glass-button danger",onClick:v=>_(s.bookingID),style:{padding:"0.5rem 1rem","font-size":"0.9rem"}}," ✗ Cancel ",8,J)):p("",!0),s.status===1?(l(),a("button",{key:2,class:"glass-button primary",onClick:v=>B(s.bookingID),style:{padding:"0.5rem 1rem","font-size":"0.9rem"}}," ✓ Complete ",8,K)):p("",!0)])])]))),128))])])]))])}}}),ee=z(Q,[["__scopeId","data-v-3d099e6b"]]);export{ee as default};
